---
layout: layouts/base.njk
showSidebar: false
---

{# Task list layout - for tareas.html, examenes.html, proyectos.html #}
{# Uses taskType frontmatter to select which tasks to show: homework, exams, projects #}

{{ content | safe }}

{# Select task array based on taskType #}
{% set taskList = [] %}
{% if taskType == "homework" %}
  {% set taskList = tasks.homework %}
{% elif taskType == "exams" %}
  {% set taskList = tasks.exams %}
{% elif taskType == "projects" %}
  {% set taskList = tasks.projects %}
{% endif %}

{# Task list #}
{% if taskList and taskList.length > 0 %}
<div class="space-y-4">
  {% for task in taskList %}
  <article class="p-4 rounded-lg border-l-4 bg-bg-secondary
    {% if task.type == 'homework' %}border-homework{% endif %}
    {% if task.type == 'exam' %}border-exam{% endif %}
    {% if task.type == 'project' %}border-project{% endif %}
  ">
    <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2">
      <div>
        <h3 class="font-bold text-lg">
          <a href="{{ task.url | url }}" class="text-text hover:text-accent">{{ task.title }}</a>
        </h3>
        {% if task.chapter %}
        <p class="text-text-muted text-sm">{{ task.chapter }}</p>
        {% endif %}
      </div>
      <div class="flex flex-col items-start sm:items-end text-sm">
        {% if task.type == 'exam' and task.date %}
        <span class="text-text-muted">
          Fecha: {{ task.date | formatDate }}
        </span>
        {% elif task.due %}
        <span class="
          {% if task.overdue %}text-exam{% else %}text-text-muted{% endif %}
        ">
          Fecha limite: {{ task.due | formatDate }}
        </span>
        {% endif %}
        {% if task.points %}
        <span class="text-accent">{{ task.points }} puntos</span>
        {% endif %}
      </div>
    </div>
    {% if task.summary %}
    <p class="mt-2 text-text-muted">{{ task.summary }}</p>
    {% endif %}
  </article>
  {% endfor %}
</div>
{% else %}
<p class="text-text-muted text-center py-8">No hay elementos para mostrar.</p>
{% endif %}
